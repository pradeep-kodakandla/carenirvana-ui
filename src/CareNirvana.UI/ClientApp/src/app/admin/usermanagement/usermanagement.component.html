
<div *ngIf="selectedRecord">
  <!---->
  <div>
    <h2>{{ mode === 'view' ? 'View User' : mode === 'add' ? 'Add User' : 'Update User' }}</h2>

    <!-- Login Details Section -->
    <div class="card mb-4" style="margin:2px !important;">
      <div class="card-header">
        <h6 style="color: #007BFF; font-weight: bold;">Login Details</h6>
      </div>
      <div class="form-row">
        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Username</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter username" [(ngModel)]="user.username" />
        </mat-form-field>

          <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
            <mat-label>Password Hint</mat-label>
            <input matInput [readonly]="mode === 'view'" placeholder="Enter password hint" [(ngModel)]="user.passwordHint" />
          </mat-form-field>

          <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
            <mat-label>Password Hint Answer</mat-label>
            <input matInput [readonly]="mode === 'view'" placeholder="Enter password hint answer" [(ngModel)]="user.passwordHintAnswer" />
          </mat-form-field>

          <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
            <mat-label>Password Expiry</mat-label>
            <input matInput [readonly]="mode === 'view'" placeholder="Enter expiry (Yes/No)" [(ngModel)]="user.passwordExpiry" />
          </mat-form-field>

          <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
            <mat-label>Role</mat-label>
            <input matInput [readonly]="mode === 'view'" placeholder="Enter role" [(ngModel)]="user.role" />
          </mat-form-field>

          <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
            <mat-label>Data Attributes</mat-label>
            <input matInput [readonly]="mode === 'view'" placeholder="Enter data attributes" [(ngModel)]="user.dataAttributes" />
          </mat-form-field>

          <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
            <mat-label>Work Basket</mat-label>
            <input matInput [readonly]="mode === 'view'" placeholder="Enter work basket" [(ngModel)]="user.workBasket" />
          </mat-form-field>

          <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
            <mat-label>Manager</mat-label>
            <input matInput [readonly]="mode === 'view'" placeholder="Enter manager name" [(ngModel)]="user.manager" />
          </mat-form-field>
        </div>
      </div>

    <!-- Personal Details Section -->
    <div class="card mb-4" style="margin:2px !important;">
      <div class="card-header">
        <h6 style="color: #007BFF; font-weight: bold;">Personal Details</h6>
      </div>
      <div class="form-row">
        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Title</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter title" [(ngModel)]="user.title" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>First Name</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter first name" [(ngModel)]="user.firstName" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Last Name</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter last name" [(ngModel)]="user.lastName" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Address Line 1</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter address line 1" [(ngModel)]="user.addressLine1" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Address Line 2</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter address line 2" [(ngModel)]="user.addressLine2" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>City</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter city" [(ngModel)]="user.city" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>State</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter state" [(ngModel)]="user.state" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Zip</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter zip" [(ngModel)]="user.zip" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Country</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter country" [(ngModel)]="user.country" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Time Zone</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter time zone" [(ngModel)]="user.timezone" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Credentials</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter credentials" [(ngModel)]="user.credentials" />
        </mat-form-field>
      </div>
    </div>

    <!-- Contact Details Section -->
    <div class="card mb-4" style="margin:2px !important;">
      <div class="card-header">
        <h6 style="color: #007BFF; font-weight: bold;">Contact Details</h6>
      </div>
      <div class="form-row">
        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Primary Phone</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter primary phone" [(ngModel)]="user.primaryPhone" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Extension</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter extension" [(ngModel)]="user.extension" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Email</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter email" [(ngModel)]="user.email" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Alternate Phone</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter alternate phone" [(ngModel)]="user.alternatePhone" />
        </mat-form-field>

        <mat-form-field appearance="outline" [class.read-only]="mode === 'view'">
          <mat-label>Cell Phone</mat-label>
          <input matInput [readonly]="mode === 'view'" placeholder="Enter cell phone" [(ngModel)]="user.cellPhone" />
        </mat-form-field>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button mat-raised-button color="primary" (click)="save()" *ngIf="mode !== 'view'">
        {{ mode === 'add' ? 'Add' : 'Update' }}
      </button>
      <button mat-raised-button color="warn" (click)="cancel()">Cancel</button>
    </div>
  </div>


</div>
<div class="card-header">
  <h4 style="color: #007BFF; font-weight: bold;">User Management</h4>
</div>
<div style="padding-top:10px;" *ngIf="!selectedRecord" class="table-container">
  <div class="d-flex justify-content-between align-items-center " style="background: whitesmoke; width: 100%;  ">
    <div class="d-flex justify-content-between align-items-center">
      <div class="search-bar-container-table">
        <button mat-icon-button>
          <mat-icon>search</mat-icon>
        </button>
        <input class="input" matInput [readonly]="mode === 'view'" (keyup)="applyFilter($event)" placeholder="Start typing to search User " #input>

      </div>
    </div>
    <button mat-icon-button color="primary" (click)="toggleAddMode()" matTooltip="Add User">
      <mat-icon>add</mat-icon>
    </button>
  </div>
  <table class="responsive-table" mat-table [dataSource]="dataSource" multiTemplateDataRows matSort>

    <!-- Column Definitions -->
    <ng-container matColumnDef="UN">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> User Name </th>
      <td mat-cell *matCellDef="let element"> {{ element.UN }} </td>
    </ng-container>

    <ng-container matColumnDef="FN">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Full Name </th>
      <td mat-cell *matCellDef="let element"> {{ element.FN }} </td>
    </ng-container>

    <ng-container matColumnDef="Role">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Role </th>
      <td mat-cell *matCellDef="let element"> {{ element.Role }} </td>
    </ng-container>

    <ng-container matColumnDef="Dept">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Department </th>
      <td mat-cell *matCellDef="let element"> {{ element.Dept }} </td>
    </ng-container>

    <ng-container matColumnDef="WB">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Work Basket </th>
      <td mat-cell *matCellDef="let element"> {{ element.WB }} </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> Actions </th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button (click)="viewRecord(element)">
          <mat-icon>visibility</mat-icon>
        </button>
        <button mat-icon-button (click)="editRecord(element)">
          <mat-icon style="color: #007BFF">edit</mat-icon>
        </button>
        <button mat-icon-button (click)="deleteRecord(element)">
          <mat-icon style="color: #007BFF">delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="9">No data matching the filter "{{input.value}}"</td>
    </tr>
  </table>
  <mat-paginator [pageSizeOptions]="[10, 25, 100]" aria-label="Select page of users"></mat-paginator>


  <!-- View/Edit Section -->
  <!--<div *ngIf="selectedRecord" class="mt-4">
    <h3>{{ isEditing ? 'Edit Record' : 'View Record' }}</h3>
    <form>
      <div class="row">
        <div class="col-md-4" *ngFor="let key of recordKeys">
          <label>{{ key }}</label>
          <input type="text"
                 class="form-control"
                 [(ngModel)]="selectedRecord[key]"
                 [readonly]="!isEditing"
                 [name]="key" />
        </div>
      </div>
      <div class="mt-3">
        <button class="btn btn-secondary" (click)="clearSelection()">Cancel</button>
        <button *ngIf="isEditing" class="btn btn-success" (click)="saveRecord()">Save</button>
      </div>
    </form>
  </div>-->
</div>


