<!-- Top controls: search + status filter -->
<!-- Top controls: search + status button-toggle -->
<div class="enroll-toolbar">
  <div class="search-wrap">

    <input type="text"
           placeholder="🔍 Search by plan, account, product, benefit plan, dates, status"
           [value]="searchText"
           (input)="onSearchChange($any($event.target).value)"
           class="search-input" />
  </div>


  <div class="filter-wrap">
    <label class="filter-label">Status</label>

    <div class="btn-toggle">
      <button type="button"
              class="btn-chip"
              [class.active]="statusFilter === 'Active'"
              (click)="onStatusFilterChange('Active')"
              [attr.aria-selected]="statusFilter === 'Active'">
        Active
      </button>

      <button type="button"
              class="btn-chip"
              [class.active]="statusFilter === 'Inactive'"
              (click)="onStatusFilterChange('Inactive')"
              [attr.aria-selected]="statusFilter === 'Inactive'">
        Inactive
      </button>

      <button type="button"
              class="btn-chip"
              [class.active]="statusFilter === 'All'"
              (click)="onStatusFilterChange('All')"
              [attr.aria-selected]="statusFilter === 'All'">
        All
      </button>
    </div>

  </div>
</div>



<!-- Cards list -->
<div class="cards-container" *ngIf="filtered?.length; else emptyTpl">
  <div class="enroll-card" *ngFor="let m of filtered">
    <div class="levels">
      <div class="level-row" *ngFor="let p of getLevelPairs(m)">
        <div class="level-key">{{ p.key }}</div>
        <div class="level-val">{{ p.val }}</div>
      </div>
    </div>

    <div class="divider"></div>

    <div class="meta">
      <div class="meta-item">
        <div class="meta-key">Start Date</div>
        <div class="meta-val">{{ m.startDate | date:'MMM d, y' }}</div>
      </div>
      <div class="meta-item">
        <div class="meta-key">End Date</div>
        <div class="meta-val">{{ m.endDate ? (m.endDate | date:'MMM d, y') : '—' }}</div>
      </div>
      <div class="meta-item">
        <div class="meta-key">Status</div>
        <div class="meta-val">
          <span [class]="statusClass(m)">{{ displayStatus(m) }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #emptyTpl>
  <div class="empty-state">
    No enrollments found for the current filters.
  </div>
</ng-template>
