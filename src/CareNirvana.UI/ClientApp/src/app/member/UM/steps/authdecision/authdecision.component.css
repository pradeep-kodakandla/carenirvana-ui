/*
  AuthDecision — Chrome-Tab Style
  Left border drawn as two segments (::before / ::after) with a gap at the active tab.
  JS sets --gap-top and --gap-bottom on .tab-content.
*/

:host {
  --bw: 2px;
  --r: 14px;
  --line: #D8DEE4;
  --clr: var(--line);

  --clr-pended:      #F59E0B;  --clr-pended-bg:  #FFFBEB;  --clr-pended-on:  #78350F;  --clr-pended-pill:  #FEF3C7;
  --clr-approved:    #22C55E;  --clr-approved-bg: #F0FDF4;  --clr-approved-on: #14532D;  --clr-approved-pill: #DCFCE7;
  --clr-denied:      #EF4444;  --clr-denied-bg:   #FEF2F2;  --clr-denied-on:   #7F1D1D;  --clr-denied-pill:   #FEE2E2;
  --clr-partial:     #3B82F6;  --clr-partial-bg:  #EFF6FF;  --clr-partial-on:  #1E3A5F;  --clr-partial-pill:  #DBEAFE;
  --clr-other:       #94A3B8;  --clr-other-bg:    #F8FAFC;  --clr-other-on:    #334155;  --clr-other-pill:    #F1F5F9;
}

/* ===== Save bar (legacy, hidden — buttons moved to content header) ===== */
.case-savebar { display:none }

/* ===== Content Header Bar ===== */
.content-header {
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 20px;
  border-bottom:1px solid rgba(0,0,0,.06);
  background:#fff;
  border-radius:0 calc(var(--r) - 1px) 0 0;
  gap:12px;
  min-height:52px;
}
.content-header-left { display:flex;align-items:center;gap:12px;min-width:0;flex:1 }
.content-header-title { font-weight:700;font-size:15px;color:#1E293B;line-height:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis }
.content-header-badge { display:inline-flex;align-items:center;padding:3px 12px;border-radius:999px;font-size:10.5px;font-weight:700;letter-spacing:.04em;text-transform:uppercase;white-space:nowrap;flex-shrink:0;line-height:18px }

.content-header-actions { display:flex;align-items:center;gap:8px;flex-shrink:0 }
.content-header-actions .btn { border-radius:999px;font-weight:600;font-size:13px;padding:6px 18px;white-space:nowrap }
.content-header-actions .btn-outline-secondary { border-color:#D8DEE4;color:#475569 }
.content-header-actions .btn-outline-secondary:hover { background:#F8FAFC;border-color:#94A3B8 }
.content-header-actions .btn-outline-danger { border-color:#FECACA;color:#DC2626 }
.content-header-actions .btn-outline-danger:hover { background:#FEF2F2;border-color:#F87171 }

/* Content header status-colored backgrounds */
.content-header.status-approved-header  { background:var(--clr-approved-bg) }
.content-header.status-approved-header .content-header-title { color:var(--clr-approved-on) }
.content-header.status-approved-header .content-header-badge { background:var(--clr-approved-pill);color:var(--clr-approved-on) }

.content-header.status-denied-header    { background:var(--clr-denied-bg) }
.content-header.status-denied-header .content-header-title { color:var(--clr-denied-on) }
.content-header.status-denied-header .content-header-badge { background:var(--clr-denied-pill);color:var(--clr-denied-on) }

.content-header.status-pended-header    { background:var(--clr-pended-bg) }
.content-header.status-pended-header .content-header-title { color:var(--clr-pended-on) }
.content-header.status-pended-header .content-header-badge { background:var(--clr-pended-pill);color:var(--clr-pended-on) }

.content-header.status-partial-header   { background:var(--clr-partial-bg) }
.content-header.status-partial-header .content-header-title { color:var(--clr-partial-on) }
.content-header.status-partial-header .content-header-badge { background:var(--clr-partial-pill);color:var(--clr-partial-on) }

.content-header.status-other-header     { background:var(--clr-other-bg) }
.content-header.status-other-header .content-header-title { color:var(--clr-other-on) }
.content-header.status-other-header .content-header-badge { background:var(--clr-other-pill);color:var(--clr-other-on) }

/* ===== Layout ===== */
.decision-details-layout { display:flex;align-items:flex-start;position:relative }

/* ===== Tab rail ===== */
.tabs-container { width:258px;min-width:258px;position:sticky;z-index:3 }
.tabs { display:flex;flex-direction:column;gap:0 }

/* ===== Tab ===== */
.tab {
  position:relative;background:#fff;
  padding:14px 16px 12px;cursor:pointer;
  transition:background .15s,opacity .15s;
  border-left:4px solid var(--line);
  border-top:var(--bw) solid var(--line);
  border-bottom:none;
  border-right:var(--bw) solid var(--line);
}
.tab:first-child { border-top-left-radius:var(--r) }
.tab:last-child  { border-bottom:var(--bw) solid var(--line);border-bottom-left-radius:var(--r) }

.tab.status-pended   { border-left-color:var(--clr-pended) }
.tab.status-approved  { border-left-color:var(--clr-approved) }
.tab.status-denied    { border-left-color:var(--clr-denied) }
.tab.status-partial   { border-left-color:var(--clr-partial) }
.tab.status-other     { border-left-color:var(--clr-other) }

.tab:not(.active) { opacity:.6 }
.tab:not(.active):hover { opacity:.85;background:#F8F9FA }

/* ===== Active tab ===== */
.tab.active {
  opacity:1;z-index:5;
  border-right:none;
  margin-right:calc(-1 * var(--bw));
  padding-right:calc(16px + var(--bw));
}

.tab.active.status-approved  { border-top-color:var(--clr-approved); border-left-color:var(--clr-approved); background:var(--clr-approved-bg) }
.tab.active.status-denied    { border-top-color:var(--clr-denied);   border-left-color:var(--clr-denied);   background:var(--clr-denied-bg) }
.tab.active.status-pended    { border-top-color:var(--clr-pended);   border-left-color:var(--clr-pended);   background:var(--clr-pended-bg) }
.tab.active.status-partial   { border-top-color:var(--clr-partial);  border-left-color:var(--clr-partial);  background:var(--clr-partial-bg) }
.tab.active.status-other     { border-top-color:var(--clr-other);    border-left-color:var(--clr-other);    background:var(--clr-other-bg) }

.tab.active:last-child.status-approved  { border-bottom:var(--bw) solid var(--clr-approved) }
.tab.active:last-child.status-denied    { border-bottom:var(--bw) solid var(--clr-denied) }
.tab.active:last-child.status-pended    { border-bottom:var(--bw) solid var(--clr-pended) }
.tab.active:last-child.status-partial   { border-bottom:var(--bw) solid var(--clr-partial) }
.tab.active:last-child.status-other     { border-bottom:var(--bw) solid var(--clr-other) }

/* Tab before active */
.tab.before-active { border-bottom:var(--bw) solid var(--line) }
.tab.before-active.before-status-approved  { border-bottom-color:var(--clr-approved) }
.tab.before-active.before-status-denied    { border-bottom-color:var(--clr-denied) }
.tab.before-active.before-status-pended    { border-bottom-color:var(--clr-pended) }
.tab.before-active.before-status-partial   { border-bottom-color:var(--clr-partial) }
.tab.before-active.before-status-other     { border-bottom-color:var(--clr-other) }

.tab.active + .tab { border-top-color:transparent }

/* ===== Tab internals ===== */
.tab-header-row { display:flex;align-items:center;justify-content:space-between;gap:8px }
.tab-line1 { font-weight:700;font-size:13.5px;color:#1E293B;line-height:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0 }
.tab.active.status-approved .tab-line1 { color:var(--clr-approved-on) }
.tab.active.status-denied   .tab-line1 { color:var(--clr-denied-on) }
.tab.active.status-pended   .tab-line1 { color:var(--clr-pended-on) }
.tab.active.status-partial  .tab-line1 { color:var(--clr-partial-on) }
.tab.active.status-other    .tab-line1 { color:var(--clr-other-on) }

.tab-status-badge { display:inline-flex;align-items:center;padding:2px 10px;border-radius:999px;font-size:10.5px;font-weight:700;letter-spacing:.04em;text-transform:uppercase;white-space:nowrap;flex-shrink:0;line-height:18px }
.status-pended-badge   { background:var(--clr-pended-pill);  color:var(--clr-pended-on) }
.status-approved-badge  { background:var(--clr-approved-pill); color:var(--clr-approved-on) }
.status-denied-badge    { background:var(--clr-denied-pill);  color:var(--clr-denied-on) }
.status-partial-badge   { background:var(--clr-partial-pill); color:var(--clr-partial-on) }
.status-other-badge     { background:var(--clr-other-pill);   color:var(--clr-other-on) }

.tab-line2 { margin-top:4px;font-size:12px;color:#64748B;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap }
.tab-code-line { margin-top:3px;font-size:12px;font-weight:600;color:#475569;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap }
.tab-line4 { margin-top:2px;font-size:11px;font-weight:500;color:#94A3B8;line-height:15px;font-style:italic;overflow:hidden;text-overflow:ellipsis;white-space:nowrap }


/* ===========================================================
   CONTENT PANEL
   Top/right/bottom borders are normal.
   Left border drawn as two pseudo-element segments with a gap.
   --gap-top / --gap-bottom set by the component via [style].
   =========================================================== */
.tab-content {
  flex:1;min-width:0;background:#fff;
  position:relative;
  z-index:2;
  overflow:visible;

  border-top:var(--bw) solid var(--clr);
  border-right:var(--bw) solid var(--clr);
  border-bottom:var(--bw) solid var(--clr);
  border-left:none;
  border-radius:0 var(--r) var(--r) 0;

  --gap-top:0px;
  --gap-bottom:0px;
}

/* Left border ABOVE the gap */
.tab-content::before {
  content:'';
  position:absolute;
  left:calc(-1 * var(--bw));
  top:calc(-1 * var(--bw));
  width:var(--bw);
  height:var(--gap-top);
  background:var(--clr);
  z-index:1;
}

/* Left border BELOW the gap */
.tab-content::after {
  content:'';
  position:absolute;
  left:calc(-1 * var(--bw));
  top:var(--gap-bottom);
  bottom:calc(-1 * var(--bw));
  width:var(--bw);
  background:var(--clr);
  z-index:1;
}

/* Status colors */
.tab-content.status-approved-panel { --clr:var(--clr-approved);border-top-color:var(--clr-approved);border-right-color:var(--clr-approved);border-bottom-color:var(--clr-approved) }
.tab-content.status-denied-panel   { --clr:var(--clr-denied);  border-top-color:var(--clr-denied);  border-right-color:var(--clr-denied);  border-bottom-color:var(--clr-denied) }
.tab-content.status-pended-panel   { --clr:var(--clr-pended);  border-top-color:var(--clr-pended);  border-right-color:var(--clr-pended);  border-bottom-color:var(--clr-pended) }
.tab-content.status-partial-panel  { --clr:var(--clr-partial); border-top-color:var(--clr-partial); border-right-color:var(--clr-partial); border-bottom-color:var(--clr-partial) }
.tab-content.status-other-panel    { --clr:var(--clr-other);   border-top-color:var(--clr-other);   border-right-color:var(--clr-other);   border-bottom-color:var(--clr-other) }


/* ===== Sections ===== */
.section-card { border:none;border-radius:0;padding:0;background:#fff;margin-bottom:0;border-bottom:1px solid #F1F5F9;overflow:visible }
.section-card:last-child { border-bottom:none }
.section-header { display:flex;align-items:center;gap:10px;padding:14px 20px 12px;cursor:pointer;user-select:none;background:transparent;border-bottom:2px thin gray;transition:background .12s }
.section-header:hover { background:rgba(0,123,255,.03) }
.section-icon { width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0;background:#EBF5FB;color:#007bff }
.section-icon svg,.section-icon img,.section-icon i { width:16px;height:16px }
.section-title { font-weight:700;font-size:14px;color:#1E293B;letter-spacing:.02em;flex:1 }
.section-chevron { width:20px;height:20px;display:flex;align-items:center;justify-content:center;color:#94A3B8;transition:transform .2s cubic-bezier(.2,0,0,1);flex-shrink:0 }
.section-chevron svg { width:16px;height:16px }
.section-card.collapsed .section-chevron { transform:rotate(-90deg) }
.section-card.collapsed .section-header  { border-bottom-color:transparent }
.section-body { padding:16px 20px 20px;overflow:visible }
.section-card.collapsed .section-body { display:none }


/* ===== Grid ===== */
.grid { display:grid;gap:16px;align-items:start;grid-template-columns:repeat(4,minmax(0,1fr)) }
@media (max-width:1200px) { .grid { grid-template-columns:repeat(3,minmax(0,1fr)) } }
@media (max-width:900px)  { .grid { grid-template-columns:repeat(2,minmax(0,1fr)) } }
@media (max-width:600px)  { .grid { grid-template-columns:1fr } }

/* ===== Fields ===== */
.ff-field { display:flex;flex-direction:column;width:100%;min-width:0 }
.ff-outline { position:relative;border:1.5px solid #CAC4D0;border-radius:12px;background:#fff;padding:1px;width:100%;overflow:visible;transition:box-shadow .15s,border-color .15s }
.ff-outline:hover { border-color:#1C1B1F }
.ff-outline:focus-within { border-color:#007bff;border-width:2px;padding:0;box-shadow:0 0 0 1px rgba(0,123,255,.1) }
.ff-outline:focus-within .ff-float-label { color:#007bff }
.ff-outline.ff-disabled { opacity:.52;pointer-events:none;background:#F7F7F9 }
.ff-outline.ff-invalid  { border-color:#dc3545 }
.ff-float-label { position:absolute;top:-9px;left:12px;padding:0 5px;background:#fff;font-size:11.5px;font-weight:600;color:#64748B;line-height:18px;white-space:nowrap;z-index:2 }
.req-star { color:#dc3545;margin-left:2px;font-weight:800 }
.ff-body { display:flex;align-items:center;min-height:40px }
.ff-input { width:100%;border:0;outline:none;background:transparent;font-size:13.5px;line-height:22px;padding-left:10px;color:#1C1B1F }
.ff-input:not(.ff-textarea) { height:40px }
.ff-textarea { resize:vertical;min-height:110px;padding-top:6px }
.ff-ui { display:block;width:100% }
/* Strip ALL borders/outlines/shadows from dropdown & datetime-picker containers and every child wrapper */
:host ::ng-deep .ff-outline ui-smart-dropdown,
:host ::ng-deep .ff-outline ui-datetime-picker { width:100%;display:block }
:host ::ng-deep .ff-outline ui-smart-dropdown > *,
:host ::ng-deep .ff-outline ui-datetime-picker > * { border:0!important;outline:none!important;box-shadow:none!important;background:transparent!important;border-radius:0!important }
:host ::ng-deep .ff-outline ui-smart-dropdown input,
:host ::ng-deep .ff-outline ui-datetime-picker input { border:0!important;outline:none!important;box-shadow:none!important;font-size:13.5px!important;background:transparent!important;height:40px!important;padding-left:10px!important }
/* Also strip borders from any inner .dropdown, .form-control, .input-group, .mat-*, .ng-select wrappers */
:host ::ng-deep .ff-outline ui-smart-dropdown .dropdown,
:host ::ng-deep .ff-outline ui-smart-dropdown .form-control,
:host ::ng-deep .ff-outline ui-smart-dropdown .form-select,
:host ::ng-deep .ff-outline ui-smart-dropdown .input-group,
:host ::ng-deep .ff-outline ui-smart-dropdown .ng-select-container,
:host ::ng-deep .ff-outline ui-smart-dropdown .mat-form-field-wrapper,
:host ::ng-deep .ff-outline ui-smart-dropdown .mat-form-field-flex,
:host ::ng-deep .ff-outline ui-smart-dropdown .mat-form-field-outline,
:host ::ng-deep .ff-outline ui-smart-dropdown .p-dropdown,
:host ::ng-deep .ff-outline ui-smart-dropdown .p-inputtext,
:host ::ng-deep .ff-outline ui-smart-dropdown select,
:host ::ng-deep .ff-outline ui-datetime-picker .dropdown,
:host ::ng-deep .ff-outline ui-datetime-picker .form-control,
:host ::ng-deep .ff-outline ui-datetime-picker .form-select,
:host ::ng-deep .ff-outline ui-datetime-picker .input-group,
:host ::ng-deep .ff-outline ui-datetime-picker .ng-select-container,
:host ::ng-deep .ff-outline ui-datetime-picker .p-calendar,
:host ::ng-deep .ff-outline ui-datetime-picker .p-inputtext { border:0!important;outline:none!important;box-shadow:none!important;background:transparent!important }
/* Ensure disabled dropdown label stays readable */
.ff-outline.ff-disabled .ff-float-label { background:#F7F7F9 }
.ff-error { color:#dc3545;font-size:12px;margin-top:6px }
.ff-span-all { grid-column:1/-1 }
.ff-checkbox { display:flex;align-items:center;gap:12px;padding:8px 4px }
.ff-checkbox .form-check-input { margin:0;margin-top:1px;border-radius:4px }
.ff-checkbox .form-check-label { margin:0;cursor:pointer;font-size:14px;color:#1C1B1F }

/* ===== Responsive ===== */
@media (max-width:1000px) {
  .decision-details-layout { flex-direction:column;gap:12px }
  .tabs-container { width:100%;min-width:0;position:static }
  .tabs { flex-direction:row;flex-wrap:wrap;gap:8px }
  .tab { flex:1;min-width:220px;border-radius:var(--r)!important;border:var(--bw) solid var(--line)!important;border-left-width:4px!important }
  .tab.active { margin-right:0!important;padding-right:16px!important;border-right:var(--bw) solid!important }
  .tab:not(.active) { border-right:var(--bw) solid var(--line)!important }
  .tab-content { border:var(--bw) solid var(--line);border-radius:var(--r);border-left:var(--bw) solid var(--clr) }
  .tab-content::before,.tab-content::after { display:none }
  .content-header { border-radius:calc(var(--r) - 1px) calc(var(--r) - 1px) 0 0 }
  .content-header-left { flex-wrap:wrap }
  .content-header-actions { flex-wrap:wrap }
}


/* --- Dropdown overflow: handled by section-body overflow:visible + ff-outline overflow:visible --- */
/* No blanket !important overrides needed — matches authdetails pattern */
