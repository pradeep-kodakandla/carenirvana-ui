<div class="activity-container">
  <!-- Left Side - Timeline -->
  <div class="activity-left">
    <button class="add-btn" (click)="onAddNewActivity()">‚ûï Add Activity</button>

    <div cdkDropList (cdkDropListDropped)="dropActivity($event)" class="timeline-list">
      <div *ngFor="let activity of activities.data; let i = index" cdkDrag class="timeline-item">
        <div class="timeline-dot" [ngClass]="{'completed': activity.status === 'Completed'}"></div>
        <div class="timeline-content" (click)="selectActivity(i)">
          <div class="timeline-header">
            <div class="timeline-title">
              {{ activity.activityType || 'Unknown Activity' }}
              <span *ngIf="activity.status === 'Completed'">‚úÖ</span>
              <span *ngIf="activity.status !== 'Completed'">‚è≥</span>
            </div>
            <div class="timeline-priority" [ngClass]="getPriorityClass(activity.priority)">
              {{ activity.priority || 'No Priority' }}
            </div>
          </div>
          <div class="timeline-summary">
            Assigned To: {{ activity.assignTo }} | Scheduled: {{ activity.scheduledDateTime }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Side - Form or Summary -->
  <div class="activity-right">
    <ng-container *ngIf="isEditing; else aiSummary">
      <div class="auth-form">
        <form [formGroup]="activityForm">
          <div class="form-grid">
            <!-- Your form fields (same as before) -->
            <div class="form-group-outline">
              <label>Member Name</label>
              <input type="text" formControlName="memberName">
            </div>

            <div class="form-group-outline">
              <label>Activity Type *</label>
              <select formControlName="activityType">
                <option value="">Select</option>
                <option value="Medical Director Review">Medical Director Review</option>
                <option value="Nurse Review">Nurse Review</option>
              </select>
            </div>

            <div class="form-group-outline">
              <label>Priority *</label>
              <select formControlName="priority">
                <option value="">Select</option>
                <option value="High">High</option>
                <option value="Low">Low</option>
              </select>
            </div>

            <div class="form-group-outline">
              <label>Assign To *</label>
              <input type="text" formControlName="assignTo">
            </div>

            <div class="form-group-outline">
              <label>Work Basket</label>
              <select formControlName="workBasket">
                <option value="">Select</option>
                <option value="UM Reviewers">UM Reviewers</option>
                <option value="No">No</option>
              </select>
            </div>

            <div class="form-group-outline full-width">
              <label>Comments *</label>
              <textarea formControlName="comments" rows="3"></textarea>
            </div>
          </div>

          <div class="button-group">
            <button type="button" (click)="onSubmit()">Save</button>
            <button type="button" (click)="onCancel()">Cancel</button>
          </div>
        </form>
      </div>
    </ng-container>

    <ng-template #aiSummary>
      <div class="ai-summary">
        <h3>üìä Activities Summary</h3>
        <p><strong>Total Activities:</strong> {{ activities.data.length }}</p>
        <p><strong>Completed:</strong> {{ getCompletedCount() }}</p>
        <p><strong>Pending:</strong> {{ getPendingCount() }}</p>
        <p><strong>High Priority:</strong> {{ getPriorityCount('High') }}</p>
        <p><strong>Low Priority:</strong> {{ getPriorityCount('Low') }}</p>
      </div>
    </ng-template>

  </div>
</div>
